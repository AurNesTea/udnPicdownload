<html lang="zh-Hant-TW">
 <iframe allow="join-ad-interest-group" data-load-time="1742450571804" data-tagging-id="G-GFEZT7X9JE" height="0" src="https://td.doubleclick.net/td/ga/rul?tid=G-GFEZT7X9JE&amp;gacid=1883990967.1742450572&amp;gtm=45je53i1v9118046848za200&amp;dma=0&amp;gcd=13l3l3l3l1l1&amp;npa=0&amp;pscdl=noapi&amp;aip=1&amp;fledge=1&amp;frm=0&amp;tag_exp=102482433~102788824~102813109~102814060~102879719&amp;z=1012258901" style="display: none; visibility: hidden;" width="0">
 </iframe>
 <head>
  <!-- Google tag (gtag.js) -->
  <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GFEZT7X9JE">
  </script>
  <script>
   window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	
	  gtag('config', 'G-GFEZT7X9JE');
  </script>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="科學算病館-慢性疾病風險評估平台 評估冠心病、高血壓、 腦中風、糖尿病、心血管不良事件" name="description"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   科學算病館 慢性疾病風險評估平台 檢測頁
  </title>
  <style>
   .tab-content>.tab-pane {
         display: none;
     }
     .tab-content>.active {
         display: block;
       }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <link href="assetsv2/css/common.css" rel="stylesheet" type="text/css"/>
  <link href="assetsv2/css/hrc.css" rel="stylesheet" type="text/css"/>
  <script src="assets/js/jquery.min.js" type="text/javascript">
  </script>
  <script src="assetsv2/js/common.js" type="text/javascript">
  </script>
 </head>
 <!--  <link rel="stylesheet" href="assets/css/bootstrap.min.css">-->
 <body>
  <div class="menu" id="menu">
   <img alt="衛生福利部國民健康署" class="logo" src="assetsv2/images/logo.png"/>
   <div class="cpmenu">
    <li onclick="weblink('index')">
     回到首頁
     <i class="bi bi-caret-down-fill">
     </i>
    </li>
    <li onclick="weblink('assess')">
     馬上檢測
     <i class="bi bi-caret-down-fill">
     </i>
    </li>
    <li onclick="weblink('healthy')">
     健康指引
     <i class="bi bi-caret-down-fill">
     </i>
    </li>
    <li class="weblinkset" onclick="weblink('linkshare')">
     好站連結
     <i class="bi bi-caret-down-fill">
     </i>
     <div class="weblist">
      <a href="https://www.hpa.gov.tw/Home/Index.aspx" target="_blank">
       衛生福利部國民健康署
      </a>
      <br/>
      <a href="https://health99.hpa.gov.tw/" target="_blank">
       衛生福利部國民健康署健康九九+
      </a>
      <br/>
      <a href="https://www.tade.org.tw/" target="_blank">
       中華民國糖尿病衛教學會
      </a>
      <br/>
      <a href="https://www.tacd.org.tw/ehc-tacd/s/index.htm" target="_blank">
       台灣基層糖尿病協會
      </a>
      <br/>
      <a href="https://www.tsn.org.tw/" target="_blank">
       台灣腎臟醫學會
      </a>
      <br/>
      <a href="https://hypertension.org.tw/about.php" target="_blank">
       中華民國高血壓協會
      </a>
      <br/>
      <a href="https://www.tas.org.tw/" target="_blank">
       中華民國血脂及動脈硬化學
      </a>
      <br/>
     </div>
    </li>
    <li onclick="weblink('tool')">
     機構申請
     <i class="bi bi-caret-down-fill">
     </i>
    </li>
    <li onclick="weblink('QA')">
     常見QA
     <i class="bi bi-caret-down-fill">
     </i>
    </li>
    <li id="cpmenu_member" onclick="weblink('member')" style="display:none;">
     會員專區
     <i class="bi bi-caret-down-fill">
     </i>
    </li>
   </div>
   <i class="bi bi-list phonelist" onclick="menuclick()">
   </i>
  </div>
  <div class="phonemenu">
   <li onclick="weblink('index')">
    回到首頁
   </li>
   <li onclick="weblink('assess')">
    馬上檢測
   </li>
   <li onclick="weblink('healthy')">
    健康指引
   </li>
   <li onclick="weblink('linkshare')">
    好站連結
    <div class="weblist">
     <a href="https://www.hpa.gov.tw/Home/Index.aspx" target="_blank">
      衛生福利部國民健康署
     </a>
     <br/>
     <a href="https://health99.hpa.gov.tw/" target="_blank">
      衛生福利部國民健康署健康九九+
     </a>
     <br/>
     <a href="https://www.tade.org.tw/" target="_blank">
      中華民國糖尿病衛教學會
     </a>
     <br/>
     <a href="https://www.tacd.org.tw/ehc-tacd/s/index.htm" target="_blank">
      台灣基層糖尿病協會
     </a>
     <br/>
     <a href="https://www.tsn.org.tw/" target="_blank">
      台灣腎臟醫學會
     </a>
     <br/>
     <a href="https://hypertension.org.tw/about.php" target="_blank">
      中華民國高血壓協會
     </a>
     <br/>
     <a href="https://www.tas.org.tw/" target="_blank">
      中華民國血脂及動脈硬化學
     </a>
     <br/>
    </div>
   </li>
   <li onclick="weblink('tool')">
    機構申請
   </li>
   <li onclick="weblink('QA')">
    常見QA
   </li>
   <li id="phonemenu_member" onclick="weblink('member')" style="display:none;">
    會員專區
   </li>
  </div>
  <div id="div_line_login" style="position: fixed; top: 1em; right: 5em; z-index: 9999;">
   <a href="https://access.line.me/oauth2/v2.1/authorize?response_type=code&amp;client_id=2006155410&amp;redirect_uri=https://cdrc.hpa.gov.tw&amp;scope=openid%20profile&amp;state=123" id="lineLoginLink">
    <button style="cursor:pointer;background-color:transparent; border: 0;" type="button">
     <div>
      <img alt="登入" class="w100" height="50px" src="assetsv2/images/icon_line.png" width="50px"/>
     </div>
     <span style="font-size: 1.3rem;">
      登入
     </span>
    </button>
   </a>
  </div>
  <div id="div_line_logout" style="position:fixed;top:1em;right:5em;z-index:9999;display:none;">
   <a href="javascript:void(0);" onclick="doLineLogout();">
    <button style="cursor:pointer;background-color:transparent; border: 0;" type="button">
     <div>
      <img 50px""="" alt="l登出" class="w100" height="50px" src="assetsv2/images/logout.png" width=""/>
     </div>
     <span style="font-size: 1.3rem;">
      登出
     </span>
    </button>
   </a>
  </div>
  <!-- 無障礙檢測調整 - HM1130100C(去除不適當結構<p>標籤的使用 & 新增隱藏的<h1>標籤內容》 -->
  <h1 style="display:none;">
   科學算病館 慢性疾病風險評估平台 檢測頁
  </h1>
  <div class="divMain">
   <!-- 選擇要測驗的項目 start -->
   <div class="row" id="harmenupage">
    <div class="tabbable">
     <ul class="nav nav-pills disease-list">
      <li class="allDiseases active" id="allDiseases">
       <!--  <a data-toggle="tab" href="#hraAllModelTab" tabindex="1" title="所有疾病" aria-expanded="true">
                   <a href="hra-openservice-menupage.jsp?all">-->
       <span>
        所有疾病
       </span>
       /All Diseases
       <!--  </a> 
                  </a>-->
      </li>
      <li class="oneDiseases" id="oneDiseases">
       <select id="healthIssues" name="healthIssues">
        <option disabled="" selected="" value="*">
         單一疾病/One Diseases
        </option>
        <option value="chd">
         冠心病/CHD
        </option>
        <option value="stroke">
         腦中風/Stroke
        </option>
        <option value="diabetes">
         糖尿病/Diabetes
        </option>
        <option value="hypertension">
         高血壓/Hypertension
        </option>
        <option value="mace">
         心血管不良事件/MACE
        </option>
       </select>
      </li>
     </ul>
     <div id="divNoShowTab" style="display: none;">
      <ul>
       <li class="active">
        <a aria-expanded="true" data-toggle="tab" href="#hraAllModelTab" tabindex="1" title="所有疾病">
         <span>
          所有疾病
         </span>
         /All Diseases
        </a>
       </li>
       <li>
        <a data-toggle="tab" href="#hraCHDTab" tabindex="2" title="冠心病">
         <span>
          冠心病
         </span>
         /CHD
        </a>
       </li>
       <li>
        <a data-toggle="tab" href="#hraStrokeTab" tabindex="3" title="腦中風">
         <span>
          腦中風
         </span>
         /Stroke
        </a>
       </li>
       <li>
        <a data-toggle="tab" href="#hraDiabetesTab" tabindex="4" title="糖尿病">
         <span>
          糖尿病
         </span>
         /Diabetes
        </a>
       </li>
       <li>
        <a data-toggle="tab" href="#hraHypertensionTab" tabindex="5" title="高血壓">
         <span>
          高血壓
         </span>
         /Hypertension
        </a>
       </li>
       <li>
        <a data-toggle="tab" href="#hraMACETab" tabindex="6" title="心血管不良事件">
         <span>
          心血管不良事件
         </span>
         /MACE
        </a>
       </li>
      </ul>
     </div>
     <!-- 選擇要測驗的項目 end -->
     <div class="tab-content nobordertab">
      <!-- 一次所有疾病(all) -->
      <div class="tab-pane active" data-target="v4/hra-allmodel.jsp?openservice=true" id="hraAllModelTab">
       <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
       <link href="assetsv2/css/common.css" rel="stylesheet" type="text/css"/>
       <link href="assetsv2/css/hrc.css" rel="stylesheet" type="text/css"/>
       <style type="text/css">
        .result-mark{
    display: inline-block;
    width: 100%;
    font-weight: bold;
}
       </style>
       <div class="all-model" id="allModelpage">
        <!-- 第一區 -->
        <div class="row" id="allModel_step1">
         <!-- 生理參數輸入 -->
         <div class="col-xs-12 col-md-8">
          <!-- 步驟一 start -->
          <div class="step step1">
           <span class="step-no">
            <span>
             步驟
             <span class="no">
              1
             </span>
            </span>
           </span>
           <span class="step-info">
            提供您個人健康數據，
            <span class="br">
            </span>
            一次評估五種疾病的風險
            <br/>
            <span class="remark">
             (數據提供愈完整，可試算的疾病種類愈多)
            </span>
           </span>
          </div>
          <form class="form-horizontal risk-input-form" data-gtm-form-interact-id="0" id="allModelForm">
           <!-- 如果步驟一的欄位只需一欄，不需區分左右兩邊，則請在 class 為 controls 的 div 添加 oneColumn 的 class，如下釋例；並把欄位都塞在 controls1 的 div 裡面 -->
           <!-- <div class="controls oneColumn"> -->
           <div class="controls">
            <div class="control controls1">
             <label class="labels" for="gender">
              性  別
             </label>
             <div class="inputs radios">
              <label for="male">
               男
               <input data-gtm-form-interact-field-id="0" id="male" name="gender" type="radio" value="1"/>
              </label>
              <label for="female">
               女
               <input id="female" name="gender" type="radio" value="0"/>
              </label>
             </div>
             <label class="labels" for="age">
              年  齡
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="1" id="age" name="age" placeholder="35~70" type="text"/>
             </div>
             <label class="labels" for="height">
              身高(公分)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="2" id="height" name="height" placeholder="120~210" type="text"/>
             </div>
             <label class="labels" for="weight">
              體重(公斤)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="3" id="weight" name="weight" placeholder="40~140" type="text"/>
             </div>
             <label class="labels" for="waist">
              <!-- 《無障礙檢測調整 - HM1240401C 》 -->
              <a class="link-how" data-img-url="assetsv2/images/hra/how_to_waist.png" href="#" onclick="showHow(this)" tabindex="-1" title="量測腰圍方式圖示">
               <span style="display: none;">
                量測腰圍方式圖示
               </span>
               <img alt="" src="assetsv2/images/hra/icon-i.png"/>
              </a>
              腰圍(公分)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="4" id="waist" name="waist" placeholder="40~120" type="text"/>
             </div>
             <label class="labels" for="sbp">
              <!-- 《無障礙檢測調整 - HM1240401C 》 -->
              <a class="link-how" data-img-url="assetsv2/images/hra/how_to_pressure.png" href="#" onclick="showHow(this)" tabindex="-1" title="量測收縮壓方式圖示">
               <span style="display: none;">
                量測收縮壓方式圖示
               </span>
               <img alt="" src="assetsv2/images/hra/icon-i.png"/>
              </a>
              收縮壓(mm/Hg)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="5" id="sbp" name="sbp" placeholder="&lt;130" type="text"/>
             </div>
             <label class="labels" for="chol">
              總膽固醇(mg/dl)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="6" id="chol" name="chol" placeholder="120~200" type="text"/>
             </div>
            </div>
            <div class="dividingline">
            </div>
            <div class="control controls2">
             <label class="labels" for="hdlc">
              高密度膽固醇(mg/dl)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="7" id="hdlc" name="hdlc" placeholder="&gt;40" type="text"/>
             </div>
             <label class="labels" for="ldlc">
              低密度膽固醇(mg/dl)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="8" id="ldlc" name="ldlc" placeholder="&lt;130" type="text"/>
             </div>
             <label class="labels" for="tg">
              三酸甘油脂(mg/dl)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="9" id="tg" name="tg" placeholder="&lt;150" type="text"/>
             </div>
             <label class="labels" for="glu">
              空腹血糖(mg/dl)
             </label>
             <div class="inputs">
              <input data-gtm-form-interact-field-id="10" id="glu" name="glu" placeholder="70~100" type="text"/>
             </div>
             <label class="labels" for="diabetes">
              是否有糖尿病
             </label>
             <div class="inputs radios">
              <label for="diabetes-no">
               無
               <input data-gtm-form-interact-field-id="11" id="diabetes-no" name="diabetes" type="radio" value="0"/>
              </label>
              <label for="diabetes-yes">
               有
               <input id="diabetes-yes" name="diabetes" type="radio" value="1"/>
              </label>
             </div>
             <label class="labels" for="hbp">
              是否有高血壓
             </label>
             <div class="inputs radios">
              <label for="hbp-no">
               無
               <input data-gtm-form-interact-field-id="12" id="hbp-no" name="hbp" type="radio" value="0"/>
              </label>
              <label for="hbp-yes">
               有
               <input id="hbp-yes" name="hbp" type="radio" value="1"/>
              </label>
             </div>
             <label class="labels" for="smoke">
              吸菸習慣
             </label>
             <div class="inputs radios">
              <label for="smoke-no">
               無
               <input data-gtm-form-interact-field-id="13" id="smoke-no" name="smoke" type="radio" value="0"/>
              </label>
              <label for="smoke-yes">
               有
               <input id="smoke-yes" name="smoke" type="radio" value="1"/>
              </label>
             </div>
            </div>
           </div>
           <button id="btnComputeAllModel">
            開始計算
           </button>
          </form>
         </div>
         <!-- bootstrap -->
         <!-- 顯示五種風險評估結果 -->
         <div class="col-xs-12 col-md-4">
         </div>
        </div>
        <!-- step1 -->
        <div class="hr-28">
        </div>
        <!-- 第二區 -->
        <div id="allModel_step2" style="">
         <div class="step step2">
          <span class="step-no">
           <span>
            步驟
            <span class="no">
             2
            </span>
           </span>
          </span>
          <span class="step-info">
           各種疾病風險評估結果
           <br/>
           <span class="remark">
            (此風險試算僅適用於35至70歲為準確，其他年齡層僅供參考！)
           </span>
          </span>
         </div>
         <!-- 新增分級說明顯示 -->
         <div class="resultInfo">
          <p>
           分級說明：
          </p>
          <ul>
           <li>
            1.高血壓係以個人風險/族群風險比值，低風險&lt;0.75；中風險0.75-1.25；高風險 &gt;1.25。
           </li>
           <li>
            2.其他項目則參考WHO，低風險&lt;10%、中風險10-20%、高風險≥20%。
           </li>
          </ul>
         </div>
         <div class="results">
          <!-- 冠心病 -->
          <div id="risk-desc-chd1" style="">
           <div class="result results-chd green">
            <div class="result-info">
             <img alt="" class="result-image" src="assetsv2/images/hra/chd.png"/>
             <span class="result-name">
              冠心病
              <span class="br">
               <br/>
              </span>
              CHD
             </span>
             <div class="result-stage">
              <span class="stage" id="chd_result_stage">
               低風險
              </span>
             </div>
             <div class="result-guide">
              <div class="result-guide-label">
               <img alt="" src="assetsv2/images/hra/person-round.png"/>
               個人
              </div>
              <span class="result-guide-value" id="me_chd_risk">
               4
               <span class="small">
                %
               </span>
              </span>
             </div>
            </div>
            <span class="arrowSign">
             ＞
            </span>
            <a class="result-guide-btnCheck" data-type="chd" href="#step3" title="檢視健康指引">
             <button class="btnCheck">
              檢視
              <span class="brtxt">
               <br/>
              </span>
              健康指引
             </button>
            </a>
           </div>
          </div>
          <div class="risk-desc result-mark" id="risk-desc-chd0" style="display: none;">
           上傳的數據不足以分析此疾病的風險值
          </div>
         </div>
         <div class="results">
          <!-- 腦中風 -->
          <div id="risk-desc-stroke1" style="">
           <div class="result results-stroke green">
            <div class="result-info">
             <img alt="" class="result-image" src="assetsv2/images/hra/stroke.png"/>
             <span class="result-name">
              腦中風
              <span class="br">
               <br/>
              </span>
              Stroke
             </span>
             <div class="result-stage">
              <span class="stage" id="stroke_result_stage">
               低風險
              </span>
             </div>
             <div class="result-guide">
              <div class="result-guide-label">
               <img alt="" src="assetsv2/images/hra/person-round.png"/>
               個人
              </div>
              <span class="result-guide-value" id="me_stroke_risk">
               3
               <span class="small">
                %
               </span>
              </span>
             </div>
            </div>
            <span class="arrowSign">
             ＞
            </span>
            <a class="result-guide-btnCheck" data-type="stroke" href="#step3" title="檢視健康指引">
             <button class="btnCheck">
              檢視
              <span class="brtxt">
               <br/>
              </span>
              健康指引
             </button>
            </a>
           </div>
          </div>
          <div class="risk-desc result-mark" id="risk-desc-stroke0" style="display: none;">
           上傳的數據不足以分析此疾病的風險值
          </div>
         </div>
         <div class="results">
          <!-- 糖尿病 -->
          <div id="risk-desc-diabetes1" style="">
           <div class="result results-diabetes yellow">
            <div class="result-info">
             <img alt="" class="result-image" src="assetsv2/images/hra/diabetes.png"/>
             <span class="result-name">
              糖尿病
              <span class="br">
               <br/>
              </span>
              Diabetes
             </span>
             <div class="result-stage">
              <span class="stage" id="diabetes_result_stage">
               中風險
              </span>
             </div>
             <div class="result-guide">
              <div class="result-guide-label">
               <img alt="" src="assetsv2/images/hra/person-round.png"/>
               個人
              </div>
              <span class="result-guide-value" id="me_diabetes_risk">
               11
               <span class="small">
                %
               </span>
              </span>
             </div>
            </div>
            <span class="arrowSign">
             ＞
            </span>
            <a class="result-guide-btnCheck" data-type="diabetes" href="#step3" title="檢視健康指引">
             <button class="btnCheck">
              檢視
              <span class="brtxt">
               <br/>
              </span>
              健康指引
             </button>
            </a>
           </div>
          </div>
          <div class="risk-desc result-mark" id="risk-desc-diabetes0" style="display: none;">
           上傳的數據不足以分析此疾病的風險值
          </div>
          <div class="risk-desc result-mark red" id="risk-desc-diabetes2" style="display: none;">
           您本身已有糖尿病，請多注意血糖變化。
          </div>
          <div class="risk-desc result-mark red" id="risk-desc-diabetes3" style="display: none;">
           您的空腹血糖超過126，疑有糖尿病症狀，本試算並不適用，建議尋求醫師協助。
          </div>
         </div>
         <div class="results">
          <!-- 高血壓 -->
          <div id="risk-desc-hypertension1" style="">
           <div class="result results-hypertension green">
            <div class="result-info">
             <img alt="" class="result-image" src="assetsv2/images/hra/hypertension.png"/>
             <span class="result-name">
              高血壓
              <span class="br">
               <br/>
              </span>
              Hypertension
             </span>
             <div class="result-stage">
              <span class="stage" id="hypertension_result_stage">
               低風險
              </span>
             </div>
             <div class="result-guide">
              <div class="result-guide-label">
               <img alt="" src="assetsv2/images/hra/person-round.png"/>
               個人
              </div>
              <span class="result-guide-value" id="me_hypertension_risk">
               14
               <span class="small">
                %
               </span>
              </span>
             </div>
            </div>
            <span class="arrowSign">
             ＞
            </span>
            <a class="result-guide-btnCheck" data-type="hypertension" href="#step3" title="檢視健康指引">
             <button class="btnCheck">
              檢視
              <span class="brtxt">
               <br/>
              </span>
              健康指引
             </button>
            </a>
           </div>
          </div>
          <div class="risk-desc result-mark" id="risk-desc-hypertension0" style="display: none;">
           上傳的數據不足以分析此疾病的風險值
          </div>
          <div class="risk-desc result-mark red" id="risk-desc-hypertension2" style="display: none;">
           您已有高血壓，請多注意血壓變化。
          </div>
          <div class="risk-desc result-mark red" id="risk-desc-hypertension3" style="display: none;">
           您的收縮壓超過140，疑有高血壓症狀，本試算並不適用，建議尋求醫師協助。
          </div>
         </div>
         <div class="results">
          <!-- 心血管不良事件 -->
          <div id="risk-desc-mace1" style="">
           <div class="result results-mace green">
            <div class="result-info">
             <img alt="" class="result-image" src="assetsv2/images/hra/mace.png"/>
             <span class="result-name">
              心血管不良事件
              <span class="br">
               <br/>
              </span>
              MACE
             </span>
             <div class="result-stage">
              <span class="stage" id="mace_result_stage">
               低風險
              </span>
             </div>
             <div class="result-guide">
              <div class="result-guide-label">
               <img alt="" src="assetsv2/images/hra/person-round.png"/>
               個人
              </div>
              <span class="result-guide-value" id="me_mace_risk">
               7
               <span class="small">
                %
               </span>
              </span>
             </div>
            </div>
            <span class="arrowSign">
             ＞
            </span>
            <a class="result-guide-btnCheck" data-type="mace" href="#step3" title="檢視健康指引">
             <button class="btnCheck">
              檢視
              <span class="brtxt">
               <br/>
              </span>
              健康指引
             </button>
            </a>
           </div>
          </div>
          <div class="risk-desc result-mark" id="risk-desc-mace0" style="display: none;">
           上傳的數據不足以分析此疾病的風險值
          </div>
         </div>
         <!-- 步驟二 end -->
        </div>
        <div class="hr-28">
        </div>
        <!-- 第三區 -->
        <div class="row" id="allModel_step3" style="">
         <div class="step step3" id="step3">
          <span class="step-no">
           <span>
            步驟
            <span class="no">
             3
            </span>
           </span>
          </span>
          <span class="step-info">
           健康指引 -
           <span class="instruction-name" id="disease_type">
            冠心病
           </span>
          </span>
         </div>
         <div class="instructions">
          <div class="lifestyle_suggestion">
           <div class="instruction">
            <div class="instruction-image" data-itemname="少鹽">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-1減鹽.png"/>
            </div>
            <ul>
             <li class="sugg_key">
              每日鈉的攝取不超過2400毫克或鹽6公克
             </li>
             <li>
              利用辛香料(如薑、蔥、蒜、胡椒、茴香等)替換高鈉調味料(如部分鹽、味精、醬油、番茄醬等)
             </li>
             <li>
              更多生活減鹽技巧，請參考
              <a class="sugg_external_link" href="https://health99.hpa.gov.tw/media/public/pdf/11758.pdf" target="_blank" title="低鈉新食代">
               低鈉新食代
              </a>
             </li>
            </ul>
           </div>
           <div class="instruction">
            <div class="instruction-image" data-itemname="限酒">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-2限酒.png"/>
            </div>
            <ul>
             <li class="sugg_key">
              每天酒精少於20g，請參考
              <a class="sugg_external_link" href="doc/男性飲酒20g.png" target="_blank" title="常見酒類換算表">
               常見酒類換算表
              </a>
             </li>
             <li>
              可以不喝就不喝，或選擇酒精含量較低的酒，加冰加水慢慢喝
             </li>
             <li>
              更多飲酒問題，請參考
              <a class="sugg_external_link" href="https://dep.mohw.gov.tw/DOMHAOH/cp-4102-43385-107.html" target="_blank" title="衛福部酒癮衛教宣導">
               衛福部酒癮衛教宣導
              </a>
             </li>
            </ul>
           </div>
           <div class="instruction">
            <div class="instruction-image" data-itemname="減重">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-3減重.png"/>
            </div>
            <ul>
             <li class="sugg_key">
              維持理想體重(BMI:18.5-23.9)，腰圍男性&lt;90公分
             </li>
             <li>
              避免久坐並養成運動習慣，每天日曬20分鐘
             </li>
             <li>
              您可藉由規律運動與飲食調整達到健康體重的目標
             </li>
            </ul>
           </div>
           <div class="instruction">
            <div class="instruction-image" data-itemname="戒菸">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-4戒菸.png"/>
            </div>
            <ul>
             <li class="sugg_key">
              認識一手菸、二手菸、三手菸的危害，請參考
              <a class="sugg_external_link" href="https://health99.hpa.gov.tw/media/public/pdf/30958.pdf" target="_blank" title="認識菸害">
               認識菸害
              </a>
             </li>
             <li>
              請參考
              <a class="sugg_external_link" href="https://www.hpa.gov.tw/Pages/List.aspx?nodeid=443" target="_blank" title="戒菸服務">
               戒菸服務
              </a>
              ，或撥 0800-63-63-63
              <a href="https://www.hpa.gov.tw/Pages/List.aspx?nodeid=1487" target="_blank" title="戒菸專線服務中心">
               戒菸專線服務中心
              </a>
             </li>
             <li>
              更多戒菸管道，請搜尋
              <a class="sugg_external_link" href="https://www.hpa.gov.tw/Pages/List.aspx?nodeid=443" target="_blank" title="國民健康署戒菸服務專區">
               國民健康署戒菸服務專區
              </a>
             </li>
            </ul>
           </div>
           <div class="instruction">
            <div class="instruction-image" data-itemname="飲食改善">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-5飲食.png"/>
            </div>
            <ul>
             <li class="sugg_key">
              三餐均衡多變化
             </li>
             <li>
              想知道每天需要多少卡路里嗎?來
              <a class="sugg_external_link" href="https://www.ibms.sinica.edu.tw/health/plan.html" target="_blank" title="中研營養資訊網">
               中研營養資訊網
              </a>
              算算看
             </li>
             <li>
              您可搭配
              <a class="sugg_external_link" href="https://www.hpa.gov.tw/Pages/Detail.aspx?nodeid=1622&amp;pid=9514" target="_blank" title="我的餐盤">
               我的餐盤
              </a>
              或尋求醫療院所、
              <a class="sugg_external_link" href="https://www.hpa.gov.tw/Pages/Detail.aspx?nodeid=840&amp;pid=9947" target="_blank" title="社區營養推廣中心">
               社區營養推廣中心
              </a>
              等專業營養師的協助
             </li>
             <li>
              更多資訊，您可參考適合您年齡的
              <a class="sugg_external_link" href="https://health99.hpa.gov.tw/media/public/pdf/12213.pdf" target="_blank" title="國人營養指南">
               國人營養指南
              </a>
             </li>
            </ul>
           </div>
           <div class="instruction">
            <div class="instruction-image" data-itemname="運動">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-6運動.png"/>
            </div>
            <ul>
             <li class="sugg_key">
              建議每次30分鐘，每週至少150分鐘的中等費力運動(含有氧、肌力強化和柔軟度三項)，您可參考
              <a class="sugg_external_link" href="doc/全民身體活動指引_成人+心臟病高血壓.pdf" target="_blank" title="心臟病高血壓說明">
               全民身體活動指引-成年人+心臟病高血壓說明
              </a>
             </li>
             <li>
              初期運動者，可以先每次15分鐘，再慢慢調整為每次30分鐘，記得運動前後都要暖身。想知道運動消耗的熱量，請查詢
              <a class="sugg_external_link" href="https://km.hpa.gov.tw/obesity/TC/SportCalculate.aspx" target="_blank" title="運動計算機">
               運動計算機
              </a>
             </li>
             <li>
              運動有人教，可參考
              <a class="sugg_external_link" href="https://www.youtube.com/watch?v=AExY450VSxg" target="_blank" title="15分鐘上班族健康操">
               15分鐘上班族健康操
              </a>
              或
              <a class="sugg_external_link" href="https://www.youtube.com/channel/UCkf_XKjMJHZ4aDnHrlX96Sw" target="_blank" title="Wake.Taiwan系列運動">
               Wake.Taiwan系列運動
              </a>
              (請您依照身體狀況選擇)
             </li>
             <li>
              在地運動，課程好康報，請參考
              <a class="sugg_external_link" href="https://isports.sa.gov.tw/Index.aspx" target="_blank" title="運動資訊平台">
               教育部體育署-運動資訊平台
              </a>
             </li>
            </ul>
           </div>
           <div class="instruction">
            <div class="instruction-image" data-itemname="其他">
             <img alt="" src="assetsv2/images/hra/20200716生活建議-7其他.png"/>
            </div>
            <ul>
             <li>
              多食用含纖維的食物預防便祕，並養成每日排便習慣
             </li>
             <li>
              避免高油、高糖的飲食，以白開水取代飲料
             </li>
             <li>
              避免暴飲暴食
             </li>
             <li>
              作息要正常，盡量不熬夜
             </li>
            </ul>
           </div>
          </div>
         </div>
         <div class="step step4">
          <span class="step-no">
           <span>
            步驟
            <span class="no">
             4
            </span>
           </span>
          </span>
          <span class="step-info">
           後續追蹤
          </span>
         </div>
         <div class="tracks">
          <div class="followup_suggestion">
           <div class="track">
            <img alt="" class="track-image" src="assetsv2/images/hra/pic1.png"/>
            <div>
             <span class="track-name">
              1. 篩檢
             </span>
             <ul>
              <li>
               建議每年至少量測一次血壓
              </li>
              <li>
               建議每三年做一次健康檢查
              </li>
              <li>
               建議可利用國民健康署提供每三年一次的
               <a class="sugg_external_link" href="https://www.hpa.gov.tw/Pages/List.aspx?nodeid=189" target="_blank" title="免費成人健康檢查">
                免費成人健康檢查
               </a>
               做篩檢
              </li>
              <li style="list-style: none;">
               (註:55歲以上原住民或罹患小兒麻痺且年在35歲以上者，可利用國民健康署提供每年一次的免費成人健康檢查做篩檢)
              </li>
             </ul>
            </div>
           </div>
           <div class="track">
            <img alt="" class="track-image" src="assetsv2/images/hra/pic2.png"/>
            <div>
             <span class="track-name">
              2. 危險因子控制
             </span>
             <ul>
              <li>
               收縮壓：&lt;130(mm/Hg)
              </li>
              <li>
               舒張壓：&lt;85(mm/Hg)
              </li>
              <li>
               空腹血糖：&lt;100(mg/dl)
              </li>
              <li>
               總膽固醇：&lt;200(mg/dl)
              </li>
              <li>
               三酸甘油脂：&lt;150(mg/dl)
              </li>
              <li>
               高密度膽固醇：&gt;40(mg/dl)
              </li>
              <li>
               低密度膽固醇：&lt;130(mg/dl)
              </li>
              <li>
               建議體重： &lt;78(公斤)
              </li>
              <li>
               腰圍：&lt;90(公分)
              </li>
              <li>
               若有吸菸請戒菸，飲酒要適量
              </li>
              <li>
               有慢性病者，請先與醫生討論後再執行。若欲減重，也請先諮詢醫生或營養師的建議
              </li>
             </ul>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
       <script type="text/javascript">
        //var ajaxUrl_allModel = '/xxx/allmodel' + '?X-AUTH-TOKEN=' + JsControl.AuthToken;
		var ajaxUrl_allModel = '/nhri2/api/open/hra/v4/allmodel';

		var $thispage_allModel;
		var $inputform_AllModel;
		var gender;
		var validallModel = true;

		//
		var currentParameters_allModel = {};
		var currentRisk_allModel = {};
		var variableParaFemale_allModel = [ 'chol', 'hdlc', 'weight', 'dbp',
				'ua', 'waist' ]; //宣告可變動的參數
		var variableParaMale_allModel = [ 'sbp', 'hdlc', 'waist' ];

		/*----------------------------------------------------------------------------*/
		$(document).ready(
				function() {
					$thispage_allModel = $('#allModelpage');
					$inputform_AllModel = $thispage_allModel
							.find('#allModelForm');

					$inputform_AllModel.on('change',
							'input[type=radio][name=gender]', function() {
								//alert($(this).val());
								gender = $(this).val();
								switchParameterBlock_allModel($(this).val());
							});
					$('#btnComputeAllModel').bind('click', function(e) {
						e.preventDefault();
						allModelCompute();
					});
					//
					$thispage_allModel.find('.result-guide-btnCheck').on(
							'click',
							function(e) {
								e.preventDefault();
								//console.log('data-type=' + $(this).attr('data-type'));
								$thispage_allModel.find('#disease_type').html(
										getDiseaseChineseName($(this).attr(
												'data-type')));
								showInstructionArea_allModel($(this).attr(
										'data-type'));
							});
					$('#btnComputeAllModelAgain').bind('click', function(e) {
						e.preventDefault();
						allModelComputeAgain();
					});

				}); // ready();

		function allModelCompute() {
			$thispage_allModel.find('#allModel_step3').hide();
			$thispage_allModel.find('#allModel_step2').hide();

			gender = $('input[name=gender]:checked', '#allModelForm').val();
			if (gender !== '1' && gender !== '0') {
				alert('請選擇性別');
				return;
			}

			var jo = $inputform_AllModel.serializeForm(); //JSON Object
			//console.log(JSON.stringify(jo));
			//{"gender":"1","age":"60","height":"170","weight":"78","waist":"80","hip":"98","sbp":"130","dbp":"90","chol":"150","hdlc":"90","ua":"8.3","glu":"120","tg":"180","diabetes":"0","hbp":"0","smoke":"0"}

			//方便測試
			/*
			jo.gender = "1";
			jo.age="46"
			jo.height="176";
			jo.weight="96";
			jo.waist="80";
			jo.hip="98";
			jo.sbp="130";
			jo.dbp="83";
			jo.chol="144";
			jo.hdlc="87";
			jo.ua="6.3";
			jo.glu="87";
			jo.tg="119";
			jo.diabetes="1";
			jo.hbp="0";
			jo.smoke="0";
			 */

			//(2020/06/15 檢查再度開啟)
			if (!varidateallModelParameter(jo)) {
				alert('資料填寫不完整，請補填其他未填的欄位值');
				return;
			}
			if (jo.age === '') {
				alert('請填寫必要的年齡');
				return;
			}

			var chk6 = '';
			/* 
			if (jo.sbp !== '' && parseFloat(jo.sbp) >= 140) {
				//血壓定義: SBP>=140 or DBP>=90
				chk6 = chk6 + '\n您的收縮壓超過 140，疑有高血壓症狀，系統呈現的高血壓風險僅供參考。';
			}
			if (jo.glu !== '' && parseFloat(jo.glu) >= 126) {
				////空腹靜脈血糖是126 mg/dl或以上。
				chk6 = chk6 + '\n您的空腹血糖超過126，疑有糖尿病症狀，系統呈現的糖尿病風險僅供參考。';
			}
			if (chk6 !== '')
				alert(chk6);
			 */
			var yourAge = jo.age;
			currentParameters_allModel = jo;

			$thispage_allModel.mask('處理中，請稍待...');
			var token;
			$.ajax({
				url : '/nhri2/api/open/hra/v4/token',
				headers : {
					"X-CSRF-Token" : "Fetch"
				},
				type : "get",
				async : false,
				success : function(data, textStatus, request) {
					token = (request.getResponseHeader('X-CSRF-Token'));

				}
			});

			$.ajax({
				type : 'POST',
				url : ajaxUrl_allModel,
				headers : {
					"X-CSRF-Token" : token
				},
				contentType : "application/json; charset=utf-8",
				accept : "application/json",
				dataType : "json",
				data : JSON.stringify(jo)
			}).fail(function(jqXHR, textStatus, errorThrown) {
				var err = jqXHR.status + ", " + errorThrown;
				alert(err);
			}).done(function(response) {
				if (responseIsOK(response)) {					
					showAllModelRisk(response.data);
				} else {
					alert(response.message);
				}
			}).always(function(jqXHR, textStatus) {
				$thispage_allModel.unmask();
			});
		}

		function showAllModelRisk(dataAry) {
			/* 2020/08/29 分成 "chd/mace/stroke"、"糖尿病"、"高血壓" 三大類 */
			/* 2020/08/30 風險等級分法說明之tooltip 改用函數輸出*/
			var tip2020 = '(<a href="#" style="cursor:default;color:black;text-decoration:underline;" data-toggle="tooltip" data-placement="bottom" title="ABCDEF">';
			//
			$thispage_allModel.find('#risk-desc-chd0').show();
			$thispage_allModel.find('#risk-desc-diabetes0').show();
			$thispage_allModel.find('#risk-desc-ckd0').show();
			$thispage_allModel.find('#risk-desc-hypertension0').show();
			$thispage_allModel.find('#risk-desc-stroke0').show();
			$thispage_allModel.find('#risk-desc-mace0').show();

			$thispage_allModel.find('#risk-desc-chd1').hide();
			$thispage_allModel.find('#risk-desc-diabetes1').hide();
			$thispage_allModel.find('#risk-desc-diabetes2').hide();
			$thispage_allModel.find('#risk-desc-diabetes3').hide(); // 2020/05/19 bug-fix
			$thispage_allModel.find('#risk-desc-ckd1').hide();
			$thispage_allModel.find('#risk-desc-hypertension1').hide();
			$thispage_allModel.find('#risk-desc-hypertension2').hide();
			$thispage_allModel.find('#risk-desc-hypertension3').hide(); // 2020/05/19 bug-fix
			$thispage_allModel.find('#risk-desc-stroke1').hide();
			$thispage_allModel.find('#risk-desc-mace1').hide();

			//
			$.each(	dataAry,function(index, item) {
								//console.log(item.model + '>>>' + item.risk);
								//var hintClass = 'riskLevel' + getWHORiskLevel(item.risk);
								var hintClass = '';
								var riskString = '';
								var riskValue = '';
								if (item.model == 'CHDRiskV3') {
									
									
									$thispage_allModel.find('#risk-desc-chd0').hide();
									$thispage_allModel.find('#risk-desc-chd1').show();				
									
									
									$thispage_allModel.find('.results-chd').removeClass("green").removeClass("yellow").removeClass("red");
									
									riskValue = getRiskLevel2020('chd',item.risk, item.populationAvg);
									hintClass = riskToClass(riskValue);
									riskString = riskToRiskString(riskValue);
									
													
									$thispage_allModel.find('#me_chd_risk').html(Math.floor(item.risk) + '<span class="small">%</span>');
									$thispage_allModel.find('.results-chd').addClass(hintClass);
									$thispage_allModel.find('#chd_result_stage').html(riskString);
									
									$thispage_allModel.find('#chd_step2').show();
									
								} else if (item.model == 'DiabetesRiskV3') {
									
								
									$thispage_allModel.find(
											'#risk-desc-diabetes0').hide();
									if (currentParameters_allModel.diabetes === '1') { //已有糖尿病
										$thispage_allModel.find(
												'#risk-desc-diabetes2').show();
										$thispage_allModel.find(
												'#risk-desc-diabetes1').hide();
									} else {
										$thispage_allModel.find(
												'#risk-desc-diabetes1').show();
										$thispage_allModel.find(
												'#risk-desc-diabetes2').hide();
										$thispage_allModel.find('.results-diabetes').removeClass("green").removeClass("yellow").removeClass("red");
																					
										riskValue = getRiskLevel2020('diabetes',item.risk, item.populationAvg);
										hintClass = riskToClass(riskValue);
										riskString = riskToRiskString(riskValue);
											
										$thispage_allModel.find('#me_diabetes_risk').html(Math.floor(item.risk) + '<span class="small">%</span>');
										$thispage_allModel.find('.results-diabetes').addClass(hintClass);
										$thispage_allModel.find('#diabetes_result_stage').html(riskString);
											
											
										$thispage_allModel.find('#diabetes_step2').show();
									}
								} else if (item.model == 'HypertensionRiskV3') {
									
								
									$thispage_allModel.find(
											'#risk-desc-hypertension0').hide();
									if (currentParameters_allModel.hbp === '1') { //已有高血壓
										$thispage_allModel.find(
												'#risk-desc-hypertension2')
												.show();
										$thispage_allModel.find(
												'#risk-desc-hypertension1')
												.hide();
									} else {
										$thispage_allModel.find(
												'#risk-desc-hypertension1')
												.show();
										$thispage_allModel.find(
												'#risk-desc-hypertension2')
												.hide();
										
										$thispage_allModel.find('.results-hypertension').removeClass("green").removeClass("yellow").removeClass("red");

										riskValue = getRiskLevel2020('hypertension',item.risk, item.populationAvg);
										hintClass = riskToClass(riskValue);
										riskString = riskToRiskString(riskValue);
										
										$thispage_allModel.find('#me_hypertension_risk').html(Math.floor(item.risk) + '<span class="small">%</span>');
										$thispage_allModel.find('.results-hypertension').addClass(hintClass);
										$thispage_allModel.find('#hypertension_result_stage').html(riskString);
										
										$thispage_allModel.find('#hypertension_step2').show();										
										
									}
								} else if (item.model == 'StrokeRiskV3') {
									
									$thispage_allModel.find(
											'#risk-desc-stroke0').hide();
									$thispage_allModel.find(
											'#risk-desc-stroke1').show();
									
									
									$thispage_allModel.find('.results-stroke').removeClass("green").removeClass("yellow").removeClass("red");

									riskValue = getRiskLevel2020('stroke',item.risk, item.populationAvg);
									hintClass = riskToClass(riskValue);
									riskString = riskToRiskString(riskValue);									
													
									$thispage_allModel.find('#me_stroke_risk').html(Math.floor(item.risk) + '<span class="small">%</span>');
									$thispage_allModel.find('.results-stroke').addClass(hintClass);
									$thispage_allModel.find('#stroke_result_stage').html(riskString);
									
									$thispage_allModel.find('#stroke_step2').show();									
									
								} else if (item.model == 'MACERisk') {
									
									$thispage_allModel.find('#risk-desc-mace0')
											.hide();
									$thispage_allModel.find('#risk-desc-mace1')
											.show();

									$thispage_allModel.find('.results-mace').removeClass("green").removeClass("yellow").removeClass("red");

									riskValue = getRiskLevel2020('mace',item.risk, item.populationAvg);
									hintClass = riskToClass(riskValue);
									riskString = riskToRiskString(riskValue);
									
													
									$thispage_allModel.find('#me_mace_risk').html(Math.floor(item.risk) + '<span class="small">%</span>');
									$thispage_allModel.find('.results-mace').addClass(hintClass);
									$thispage_allModel.find('#mace_result_stage').html(riskString);
									
									$thispage_allModel.find('#mace_step2').show();
								}
							});
			//疑似高血壓
			if (currentParameters_allModel.sbp !== ''
					&& parseFloat(currentParameters_allModel.sbp) >= 140) {
				$thispage_allModel.find('#risk-desc-hypertension2').hide();
				$thispage_allModel.find('#risk-desc-hypertension0').hide();
				$thispage_allModel.find('#risk-desc-hypertension1').hide();
				$thispage_allModel.find('#risk-desc-hypertension3').show();
			}
			//疑似糖尿病
			if (currentParameters_allModel.glu !== ''
					&& parseFloat(currentParameters_allModel.glu) >= 126) {
				$thispage_allModel.find('#risk-desc-diabetes2').hide();
				$thispage_allModel.find('#risk-desc-diabetes0').hide();
				$thispage_allModel.find('#risk-desc-diabetes1').hide();
				$thispage_allModel.find('#risk-desc-diabetes3').show();
			}
			//
			if (currentParameters_allModel.diabetes === '1') { //已有糖尿病
				$thispage_allModel.find('#risk-desc-diabetes2').show();
				$thispage_allModel.find('#risk-desc-diabetes0').hide();
				$thispage_allModel.find('#risk-desc-diabetes1').hide();
				$thispage_allModel.find('#risk-desc-diabetes3').hide();
			}
			if (currentParameters_allModel.hbp === '1') { //已有高血壓
				$thispage_allModel.find('#risk-desc-hypertension2').show();
				$thispage_allModel.find('#risk-desc-hypertension0').hide();
				$thispage_allModel.find('#risk-desc-hypertension1').hide();
				$thispage_allModel.find('#risk-desc-hypertension3').hide();
			}
			//
			$thispage_allModel.find('#allModel_step2').show();
			window.scrollTo(0, document.body.scrollHeight); //scroll到網頁底部
		}

		function showInstructionArea_allModel(disease) {
			//$thispage_allModel.find('#allModel_step3 .hbox .diet').empty().append(getDietInstruction(''));
			//$thispage_allModel.find('#allModel_step3 .hbox .sport').empty().append(getSportInstruction(''));
			var risklevel;
			var $thispage_allModel = $('#allModelpage');
			var jo = $thispage_allModel.find('#allModelForm').serializeForm(); //JSON Object
			console.log($thispage_allModel.find('#' +disease+'_result_stage').text());

			if ($thispage_allModel.find('#' +disease+'_result_stage').text().indexOf('低風險') !==-1) {
				risklevel = 0;
			} else if ($thispage_allModel.find('#' +disease+'_result_stage').text().indexOf('中風險') !==-1) {
				risklevel = 1;
			} else {
				risklevel = 2;
			}
			console.log(risklevel);

			$thispage_allModel.find(
					'#allModel_step3 .instructions .lifestyle_suggestion')
					.empty().append(
							get_2020_lifestyle_suggestion(disease, jo,
									risklevel));
			$thispage_allModel
					.find('#allModel_step3 .tracks .followup_suggestion')
					.empty()
					.append(
							get_2020_followup_suggestion(disease, jo, risklevel));
			$thispage_allModel.find('#allModel_step3').show();
			//window.scrollTo(0, document.body.scrollHeight);	//scroll到網頁底部
		}

		/*--------------------------------------------------------------------*/
		function varidateallModelParameter(jo) {
			validAllmodel = true;
			$inputform_AllModel.find('.warn').each(function(event) {
				$(this).remove();

			});
			$inputform_AllModel.find('.inputValidationFailed').each(
					function(event) {
						$(this).removeClass('inputValidationFailed');
					});
			//console.log(isNumber(jo.age));

			validTxtField4Allmodel('#age', jo.age, '年齡');
			validTxtField4Allmodel('#height', jo.height, '身高');
			validTxtField4Allmodel('#weight', jo.weight, '體重');
			validTxtField4Allmodel('#waist', jo.waist, '腰圍');
			//validTxtField4Allmodel('#hip', jo.hip, '臀圍');
			validTxtField4Allmodel('#sbp', jo.sbp, '收縮壓');
			//validTxtField4Allmodel('#dbp', jo.sbp, '舒張壓');
			validTxtField4Allmodel('#tg', jo.tg, '三酸甘油脂');
			validTxtField4Allmodel('#chol', jo.chol, '總膽固醇');
			validTxtField4Allmodel('#hdlc', jo.hdlc, '高密度膽固醇');
			validTxtField4Allmodel('#ldlc', jo.ldlc, '低密度膽固醇');
			//validTxtField4Allmodel('#ua', jo.ua, '尿酸');
			validTxtField4Allmodel('#glu', jo.glu, '空腹血糖');
			validRadioField4Allmodel('hbp', jo.hbp, '高血壓病史');
			validRadioField4Allmodel('smoke', jo.smoke, '吸菸習慣');
			validRadioField4Allmodel('diabetes', jo.diabetes, '糖尿病史');
			//
			if (validAllmodel)
				return true;
			else
				return false;
		}
		function validRadioField4Allmodel(ele, jsonvalue, txt) {
			if (!realObject(jsonvalue)) {
				$inputform_AllModel.find('[name=' + ele + ']').each(
						function(event) {
							$(this).parent().addClass('inputValidationFailed')
						});
				//$ele2.after('<span class="red warn">' + '是必要欄位，請選擇' + '</span>');
				validAllmodel = false;
			}
		}
		function validTxtField4Allmodel(ele, jsonvalue, txt) {
			if (!realObject(jsonvalue) || jsonvalue.length === 0) {
				showFieldWarn4Allmodel($inputform_AllModel.find(ele), txt
						+ '是必填的欄位,請填寫數字');
			} else if (!isNumber(jsonvalue) || parseFloat(jsonvalue) < 0) {
				showFieldWarn4Allmodel($inputform_AllModel.find(ele), txt
						+ '必須是數字且大於0');
			}
		}
		function showFieldWarn4Allmodel($ele, msg) {
			validAllmodel = false;
			$ele.addClass('inputValidationFailed').after(
					'<span class="red warn">' + msg + '</span>');
		}

		function allModelComputeAgain() {
			//原始數據
			var jo = currentParameters_allModel;

			var v2 = '';
			var ary = variableParaFemale_allModel;
			if (currentParameters_allModel.gender == '1')
				ary = variableParaMale_allModel;
			for (var k = 0; k < ary.length; k++) {
				var $ele6 = $thispage_allModel.find('.factor-box').find(
						'#' + ary[k] + '_new');
				if ($ele6.length > 0) { //有此element
					v2 = $ele6.val();
					if (v2.length > 0)
						jo[ary[k]] = v2;
				}
			}
			console.log(JSON.stringify(jo));

			$thispage_allModel.mask('處理中，請稍待...');
			$.ajax({
				type : 'POST',
				url : ajaxUrl_allModel,
				contentType : "application/json; charset=utf-8",
				accept : "application/json",
				dataType : "json",
				data : JSON.stringify(jo)
			}).fail(function(jqXHR, textStatus, errorThrown) {
				var err = jqXHR.status + ", " + errorThrown;
				alert(err);
			}).done(
					function(response) {
						if (responseIsOK(response)) {
							drawBar_allModel(currentRisk_allModel.yourrisk,
									response.data[0].risk);
						} else {
							alert(response.message);
						}
					}).always(function(jqXHR, textStatus) {
				$thispage_allModel.unmask();
			});
		}

		function switchParameterBlock_allModel(gender) {
			if (gender == '0') {
				//$inputform_AllModel.find('.allmodel_left_common').show();
				//$inputform_AllModel.find('.allmodel_right_common').show();
				//$inputform_AllModel.find('.allmodel_left_female').show();
				//$inputform_AllModel.find('.allmodel_right_female').show();
				//$inputform_AllModel.find('.allmodel_left_male').hide();
				//$inputform_AllModel.find('.allmodel_right_male').hide();
				$inputform_AllModel.find('#hdlc').attr('placeholder', '>50');
				$inputform_AllModel.find('#ua').attr('placeholder', '<6');

			} else {
				//$inputform_AllModel.find('.allmodel_left_common').show();
				//$inputform_AllModel.find('.allmodel_right_common').show();
				//$inputform_AllModel.find('.allmodel_left_female').hide();
				//$inputform_AllModel.find('.allmodel_right_female').hide();
				//$inputform_AllModel.find('.allmodel_left_male').show();
				//$inputform_AllModel.find('.allmodel_right_male').show();
				$inputform_AllModel.find('#hdlc').attr('placeholder', '>40');
				$inputform_AllModel.find('#ua').attr('placeholder', '<7');
			}
			$('#btnComputeAllModel').show();
		}

		// 此頁點擊事件程式碼
		function showHow(sObj) {
			let
			imageURL = $(sObj).attr("data-img-url");
			$("#imageShowDiv img").attr("src", imageURL);
			$('body').css({
				'height' : '100vh',
				'overflow' : 'hidden'
			});
			$("#imageShowDiv").toggleClass("show");
		}

		function toggleDiv(sObj) {
			$('body').css({
				'height' : 'auto',
				'overflow' : 'auto'
			});
			$(sObj).toggleClass('show')
		}

		function showStageInfo(sObj) {
			let
			infoValue = $(sObj).attr("data-original-title");
			$("#infoShowDiv .info-value").text(infoValue);
			$('body').css({
				'height' : '100vh',
				'overflow' : 'hidden'
			});
			$("#infoShowDiv").toggleClass("show");

			return false;
		}
       </script>
      </div>
      <!-- 冠心病(chd) -->
      <div class="tab-pane" data-target="v4/hra-chd.jsp?openservice=true" id="hraCHDTab">
      </div>
      <!-- 腦中風(Stroke) -->
      <div class="tab-pane" data-target="v4/hra-stroke.jsp?openservice=true" id="hraStrokeTab">
      </div>
      <!-- 糖尿病(diabetes) -->
      <div class="tab-pane" data-target="v4/hra-diabetes.jsp?openservice=true" id="hraDiabetesTab">
      </div>
      <!-- 高血壓(hypertension) -->
      <div class="tab-pane" data-target="v4/hra-hypertension.jsp?openservice=true" id="hraHypertensionTab">
      </div>
      <!-- 心血管不良事件(MACE) -->
      <div class="tab-pane" data-target="v4/hra-mace.jsp?openservice=true" id="hraMACETab">
      </div>
     </div>
    </div>
   </div>
  </div>
  <!-- 說明圖示 start -->
  <div class="howtoimage" id="imageShowDiv" onclick="toggleDiv(this)">
   <img alt="圖示" src=""/>
  </div>
  <!-- 說明圖示 end -->
  <!-- 說明文字 start -->
  <div class="stageinfo" id="infoShowDiv" onclick="toggleDiv(this)">
   <div class="info">
    <span class="info-title">
     分級說明
    </span>
    <span class="info-value">
    </span>
   </div>
  </div>
  <!-- 說明文字 end -->
  <div class="footer" id="footer">
   國民健康署 © 版權所有
   <br/>
   國民健康署 台北辦公室　總機：02-2522-0888　地址：(10341)台北市大同區塔城街36號
   <br/>
   網站服務信箱︰program.hpa@gmail.com 服務時間：9:00~17:00 (不含星期六、日及國定假日)
   <br/>
   <span id="countinfo">
    本網頁累積總瀏覽數=828795 / 今日總瀏覽數=2008
   </span>
   <br/>
   本網站經費由菸品健康福利捐支應。
   <br/>
   建議使用IE第11版以上、Chrome、FireFox、Edge、Safari 瀏覽器
  </div>
  <script src="assets/js/bootstrap.min.js">
  </script>
  <script src="assets/js/jquery.cookie.js">
  </script>
  <script src="assets/js/itri.js">
  </script>
  <!--====== JavaScript Block ====== -->
  <script src="assets/js/nhri.js" type="text/javascript">
  </script>
  <script src="assets/js/nhri.utils.js" type="text/javascript">
  </script>
  <script src="assets/js/risk-util.js" type="text/javascript">
  </script>
  <!-- 改用2023 版型之衛教指引 -->
  <script src="assets/js/nhri-suggestions-2023.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   if (!JSON || !JSON.parse || !JSON.stringify) document.write("<script src='assets/js/json2.js'>" + "<" + "/script>");
  </script>
  <!-- for IE6 ~ IE9 support of ISO8601 Date format -->
  <!-- IE9 解譯ISO8601有bug, 因此強迫 IE9也使用自製的ISO8601處理函數 -->
  <!--[if lt IE 10]>
		<script type="text/javascript" src="assets/js/parseISO8601.js"></script>
		<![endif]-->
  <!-- Enables HTML5 placeholder behavior for old browsers -->
  <script src="assets/js/jquery.placeholder.js" type="text/javascript">
  </script>
  <script src="assets/js/jquery.loadmask.js" type="text/javascript">
  </script>
  <script src="assets/js/consolelog.min.js" type="text/javascript">
  </script>
  <script src="assets/js/consolelog.detailprint.min.js" type="text/javascript">
  </script>
  <!-- page specific plugin scripts -->
  <script src="assets/js/jquery.jqplot.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.highlighter.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.cursor.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.dateAxisRenderer.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.canvasOverlay.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.pieRenderer.min.js" type="text/javascript">
  </script>
  <!-- Bar Chart需要以下三支 js -->
  <script src="assets/js/jqplot.barRenderer.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.pointLabels.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jqplot.categoryAxisRenderer.min.js" type="text/javascript">
  </script>
  <script src="assets/js/jquery.hotkeys.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   var $thispage = $('#harmenupage');
		var chdIsLoaded = false;
		var diabetesIsLoaded = false;
		var hypertensionIsLoaded = false;
		var ckdIsLoaded = false;
		var strokeIsLoaded = false;
		var maceIsLoaded = false;
		var allmodelIsLoaded = false;
		var commentsIsLoaded = false;
		//
		var showImageUrl = '';

		/*******************************************/
		$(document).ready(function () {

			window.JsControl.enabledRisk = '';		//那個Risk分析被啟動

			$('body').tooltip({
				trigger: 'hover', /* 當click時會hide tip */
				delay: { show: 300, hide: 0 },
				selector: '[data-toggle=tooltip]:not([disabled])'
			});

			//Enables HTML5 placeholder behavior for old browsers
			$('input, textarea').placeholder();

			JsControl.TabControl = {};      //未來key是 tab的id

			//hmspLoadContentToDiv('hraCHDTab');


			$thispage.on('click', 'a[href="#hraDiabetesTab"]', function (e) {
				e.preventDefault();
				if (!diabetesIsLoaded) diabetesIsLoaded = hmspLoadContentToDiv('hraDiabetesTab');
				pullTabControl('hraDiabetesTab');
				window.JsControl.enabledRisk = 'Diabetes';
			});

			$thispage.on('click', 'a[href="#hraHypertensionTab"]', function (e) {
				e.preventDefault();
				if (!hypertensionIsLoaded) hypertensionIsLoaded = hmspLoadContentToDiv('hraHypertensionTab');
				pullTabControl('hraHypertensionTab');
				window.JsControl.enabledRisk = 'Hypertension';
			});

			$thispage.on('click', 'a[href="#hraStrokeTab"]', function (e) {
				e.preventDefault();
				if (!strokeIsLoaded) strokeIsLoaded = hmspLoadContentToDiv('hraStrokeTab');
				pullTabControl('hraStrokeTab');
				window.JsControl.enabledRisk = 'Stroke';
			});
			$thispage.on('click', 'a[href="#hraMACETab"]', function (e) {
				e.preventDefault();
				if (!maceIsLoaded) maceIsLoaded = hmspLoadContentToDiv('hraMACETab');
				pullTabControl('hraMACETab');
				window.JsControl.enabledRisk = 'MACE';
			});

			$thispage.on('click', 'a[href="#hraCHDTab"]', function (e) {
				e.preventDefault();
				if (!chdIsLoaded) chdIsLoaded = hmspLoadContentToDiv('hraCHDTab');
				pullTabControl('hraCHDTab');
				window.JsControl.enabledRisk = 'CHD';
			});

			$thispage.on('click', 'a[href="#hraAllModelTab"]', function (e) {
				e.preventDefault();
				if (!allmodelIsLoaded) allmodelIsLoaded = hmspLoadContentToDiv('hraAllModelTab');
				pullTabControl('hraAllModelTab');
				window.JsControl.enabledRisk = 'All';
			});
			/*
			$thispage.on('click', 'a[href="#commentsTab"]', function (e) {
				e.preventDefault();
				if (!commentsIsLoaded) commentsIsLoaded = hmspLoadContentToDiv('commentsTab');
				pullTabControl('commentsTab');
			});
			*/

			//
			bindKeyPress();
			//
			//showAccessCount();
			var request = location.search.substring(1, location.search.length).split('&');
			if (request.length > 0) {
				request = request[0];
			} else {
				request = '';
			}
			//console.log(request);


			switch (request) {
				case 'diabetes':
					console.log('do diabetes');
					$('li > a[href="#hraDiabetesTab"]').click();
					break;
				case 'stroke':
					console.log('do stroke');
					$('li > a[href="#hraStrokeTab"]').click();
					break;
				case 'hypertension':
					console.log('do hypertension');
					$('li > a[href="#hraHypertensionTab"]').click();
					break;
				case 'chd':
					console.log('do chd');
					$('li > a[href="#hraCHDTab"]').click();
					break;
				case 'mace':		//原cvd (2019/03/12)
					console.log('do mace');
					$('li > a[href="#hraMACETab"]').click();
					break;
				case 'all':
					console.log('do All');
					$('li > a[href="#hraAllModelTab"]').click();
					break;			
			}
				
		


			//alert('本網站僅供計畫團隊評估測試之用，非國健署正式系統。模擬性數據僅供測試之用。');
		});


		function showAccessCount() {
			$.getJSON('/nhri2/api/secureless/pagecount' + '?pageName=hra-openservice&dummy=' + new Date().getTime(), "json").done(function (data) {
				$('#countinfo').text('本網頁累積總瀏覽數=' + data.data[0].all + ' / 今日總瀏覽數=' + data.data[0].today);
			}); // end $.getJSON
		}

		function bindKeyPress() {
			$(document).bind('keypress', 'Alt+i', function (evt) {
				/* focus active Form 的第一個input 元素 */
				var $ele = $(document).find('.tab-pane.active form.risk-input-form');
				//console.log($ele[0]);
				if ($ele.length > 0)
					$ele.find('input:visible:enabled:first', this).focus();
				return false;
			});
			$(document).bind('keypress', 'Alt+h', function (evt) {
				evt.preventDefault();
				window.location.href = 'index.jsp';
			});
		}
  </script>
  <script>
   // 此頁點擊事件程式碼
    $(".disease-list li").on("click", (e) => {
        // 選擇所有疾病或單一疾病
        $(".disease-list li").removeClass("active");
        $(e.target).closest("li").addClass("active");

        if ($(e.target).closest("li").hasClass("allDiseases")) {
            // 如果選擇的是所有疾病，把單一疾病的選取項目強制回歸至第一個首選項目  
            $(".oneDiseases option:nth-child(1)").prop("selected", true);
            
            console.log('do All');
			$('li > a[href="#hraAllModelTab"]').click();

        } 
    })
    
    $("#healthIssues").on("change", function() { showResult(); });

    $('input[name="gender"]').change(function () {
        // 新增選取性別時，是否出現右邊欄位選單的整體樣式控制

        if ($('.controls2').is(':hidden')) {
            // 表單欄位僅顯示左邊一欄            
            $(".controls").addClass("oneColumn");
        } else {
            // 表單欄位顯示左右兩欄            
            $(".controls").removeClass("oneColumn");
        }
    });

    function showResult() {
        const diseaseType = $(".disease-list > li.active").attr("id");

        switch (diseaseType) {
            case "allDiseases":
                // 選擇所有疾病
                // alert("選擇所有疾病");
                break;
            case "oneDiseases":
                // 選擇單一疾病
                const diseaseID = $("#healthIssues").val();

                switch (diseaseID) {
                    case "chd":
                        // alert("冠心病");
                        console.log('do chd');
						$('li > a[href="#hraCHDTab"]').click();
                        break;
                    case "stroke":
                        // alert("腦中風");
                        console.log('do stroke');
						$('li > a[href="#hraStrokeTab"]').click();
                        break;
                    case "diabetes":
                        // alert("糖尿病");
                		console.log('do diabetes');
						$('li > a[href="#hraDiabetesTab"]').click();
                        break;
                    case "hypertension":
                        // alert("高血壓");
                        console.log('do hypertension');
						$('li > a[href="#hraHypertensionTab"]').click();
                        break;
                    case "mace":
                        // alert("心血管不良事件");
                        console.log('do mace');
						$('li > a[href="#hraMACETab"]').click();
                        break;
                    default:
                        alert("請下拉選擇何種單一疾病");
                        return;
                }
                break;
        }

     
    }

    function showHow(sObj) {
        let imageURL = $(sObj).attr("data-img-url");
        $("#imageShowDiv img").attr("src", imageURL);
        $('body').css({
            'height': '100vh',
            'overflow': 'hidden'
        });
        $("#imageShowDiv").toggleClass("show");
    }

    function toggleDiv(sObj) {
        $('body').css({
            'height': 'auto',
            'overflow': 'auto'
        });
        $(sObj).toggleClass('show')
    }

    function showStageInfo(sObj) {
        let infoValue = $(sObj).attr("data-original-title");
        $("#infoShowDiv .info-value").text(infoValue);
        $('body').css({
            'height': '100vh',
            'overflow': 'hidden'
        });
        $("#infoShowDiv").toggleClass("show");

        return false;
    }
  </script>
 </body>
</html>
